<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
    .container { max-width: 600px; margin: 0 auto; padding: 20px; }
    .header { text-align: center; margin-bottom: 30px; }
    .logo { max-width: 150px; }
    .payment-info { margin-bottom: 30px; }
    .payment-method { display: flex; align-items: center; margin: 20px 0; }
    .payment-icon { width: 40px; margin-right: 15px; }
    .status-badge { 
      padding: 5px 10px; 
      border-radius: 15px; 
      font-size: 12px; 
      font-weight: bold; 
    }
    .status-success { background: #e8f5e9; color: #2e7d32; }
    .status-pending { background: #fff3e0; color: #f57c00; }
    .details-table { width: 100%; border-collapse: collapse; }
    .details-table td { padding: 8px; border-bottom: 1px solid #eee; }
    .details-table tr:last-child td { border-bottom: none; }
    .qr-code { text-align: center; margin: 20px 0; }
    .footer { margin-top: 30px; font-size: 12px; color: #666; text-align: center; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <img src="{{baseUrl}}/assets/images/sunny-logo.svg" alt="Sunny Payments" class="logo">
      <h1>Payment Receipt</h1>
    </div>

    <div class="payment-info">
      <div class="status-badge status-{{payment.status.toLowerCase}}">
        {{payment.status}}
      </div>
      
      <table class="details-table">
        <tr>
          <td><strong>Transaction ID:</strong></td>
          <td>{{payment.transactionId}}</td>
        </tr>
        <tr>
          <td><strong>Date:</strong></td>
          <td>{{formatDate payment.createdAt}}</td>
        </tr>
        <tr>
          <td><strong>Amount:</strong></td>
          <td>{{formatAmount payment.amount payment.currency}}</td>
        </tr>
        {{#if payment.fiatAmount}}
        <tr>
          <td><strong>Converted Amount:</strong></td>
          <td>{{formatAmount payment.fiatAmount payment.fiatCurrency}}</td>
        </tr>
        {{/if}}
      </table>
    </div>

    <div class="payment-method">
      <img src="{{baseUrl}}{{getPaymentIcon payment}}" alt="Payment Method" class="payment-icon">
      <div>
        {{#if payment.card}}
          <p>{{payment.card.brand}} •••• {{payment.card.last4}}</p>
          <p>Expires {{payment.card.expMonth}}/{{payment.card.expYear}}</p>
        {{else if payment.crypto}}
          <p>{{payment.currency}}</p>
          <p>Network: {{getNetworkName payment.currency}}</p>
          <p>Address: {{formatAddress payment.toAddress}}</p>
        {{else}}
          <p>{{payment.paymentMethodType}}</p>
        {{/if}}
      </div>
    </div>

    {{#if payment.blockchainTxId}}
    <div class="qr-code">
      <img src="{{generateQR payment.blockchainTxId}}" alt="Blockchain Verification">
      <p>Scan to verify on blockchain</p>
    </div>
    {{/if}}

    <div class="merchant-info">
      <h3>Merchant Details</h3>
      <table class="details-table">
        <tr>
          <td><strong>Business Name:</strong></td>
          <td>{{merchant.businessName}}</td>
        </tr>
        <tr>
          <td><strong>Address:</strong></td>
          <td>{{merchant.address}}</td>
        </tr>
        <tr>
          <td><strong>Contact:</strong></td>
          <td>{{merchant.contact}}</td>
        </tr>
      </table>
    </div>

    <div class="footer">
      <p>This is an official receipt from Sunny Payment Gateway.</p>
      <p>For support, contact {{config.support.email}} or call {{config.support.phone}}</p>
      <p>Receipt generated on {{formatDate now}}</p>
    </div>
  </div>
</body>
</html>
